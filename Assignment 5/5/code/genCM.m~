% Generate Compressive Measurement
function [y,phi,phiTphi,stdev] = genCM(X,m,n)
    %% INIT
    f=0.01; % fraction of sigma
    noOfSample=size(X,1);
    %% Creating Phi
    phi=cell(noOfSample,1);
    phiTphi=cell(noOfSample,1);    
    y=zeros(m,noOfSample);
    for i=1:noOfSample
        ithPhi=randi([0,1],[m,p]);
        ithPhi(ithPhi==0)=-1;
        ithPhi=ithPhi.*(1/ sqrt(m));
        phi{i}=ithPhi;
        % Finding Phi^2
        phiTphi{i}=ithPhi'*ithPhi;
    end
    
    %% Creating Y
    stdevVal=cell(noOfSample,1);
    for i=1:noOfSample
        tempY=phi{i}*X(i,:)';
        stdev=f*mean(a); 
        stdevVal{i}=stdev;
        % add gaussain noise
        noise=randn(m,1).*stdev;        
        y(:,i)=tempY+noise;
    end
    
    stdev=f*(1/(m*N))*normSum;
    for i=1:N
        tempY=phi(:,:,i)*X(:,i);
        %noise=rand([m,1]).*stdev(i);
        y(:,i)=tempY+noise;
        %y(:,i)=tempY;
    end

end
